# ğŸ›’ NexCart Backend

AI-powered e-commerce platform backend built with Django REST Framework.

## ğŸš€ Features

- **JWT Authentication** - Secure user authentication
- **Product Management** - Full CRUD operations for products
- **Smart Cart System** - Authentication-required shopping cart
- **AI Recommendations** - Machine learning-powered product recommendations
- **Payment Integration** - MeSomb mobile money payments (MTN, Orange)
- **OAuth2 Social Login** - Google, Discord, Microsoft
- **Order Management** - Complete order lifecycle
- **Wishlist** - Save favorite products
- **Reviews & Ratings** - Product review system
- **Admin Dashboard** - Django admin for management
- **Image Storage** - Cloudinary integration
- **Background Tasks** - Celery for async operations
- **Caching** - Redis for performance

## ğŸ› ï¸ Tech Stack

- **Framework**: Django 5.2 + Django REST Framework
- **Database**: PostgreSQL (Neon)
- **Cache**: Redis (Upstash)
- **Storage**: Cloudinary
- **Task Queue**: Celery + Redis
- **Authentication**: JWT (Simple JWT)
- **ML**: Scikit-learn, Pandas, NumPy
- **Deployment**: Render

## ğŸ“‹ Prerequisites

- Python 3.11+
- PostgreSQL (Neon account)
- Redis (Upstash account)
- Cloudinary account

## ğŸ”§ Local Development Setup

### 1. Clone the repository

```bash
git clone https://github.com/YOUR_USERNAME/nexcart-backend.git
cd nexcart-backend
```

### 2. Create virtual environment

```bash
python -m venv venv

# Windows
venv\Scripts\activate

# Linux/Mac
source venv/bin/activate
```

### 3. Install dependencies

```bash
pip install -r requirements.txt
```

### 4. Environment Variables

Copy `.env.example` to `.env` and fill in your credentials:

```bash
cp .env.example .env
```

Required variables:
- `SECRET_KEY` - Django secret key
- `DATABASE_URL` - Neon PostgreSQL URL
- `REDIS_URL` - Redis connection URL
- `CLOUDINARY_*` - Cloudinary credentials
- `GOOGLE_CLIENT_*` - OAuth credentials (optional)
- `MESOMB_*` - Payment gateway credentials (optional)

### 5. Run migrations

```bash
python manage.py migrate
```

### 6. Create superuser

```bash
python manage.py createsuperuser
```

### 7. Run development server

```bash
python manage.py runserver
```

The API will be available at `http://localhost:8000/api/`
Admin panel at `http://localhost:8000/admin/`

## ğŸš€ Deployment

See [DEPLOYMENT.md](DEPLOYMENT.md) for detailed deployment instructions to Render.

Quick deploy:
1. Push code to GitHub
2. Connect repository to Render
3. Set environment variables
4. Deploy!

## ğŸ“¡ API Endpoints

### Authentication
- `POST /api/users/auth/register/` - Register new user
- `POST /api/users/auth/login/` - Login
- `POST /api/users/auth/token/refresh/` - Refresh JWT token
- `GET /api/users/auth/profile/` - Get user profile
- `PATCH /api/users/auth/profile/` - Update profile

### Products
- `GET /api/products/` - List all products
- `GET /api/products/{id}/` - Get product details
- `GET /api/products/featured/` - Featured products
- `GET /api/recommendations/` - AI-powered recommendations

### Cart (Authentication Required)
- `GET /api/cart/` - Get user cart
- `POST /api/cart/add/` - Add item to cart
- `PATCH /api/cart/items/{id}/` - Update cart item
- `DELETE /api/cart/items/{id}/` - Remove from cart
- `DELETE /api/cart/clear/` - Clear cart

### Orders
- `GET /api/orders/` - List user orders
- `GET /api/orders/{id}/` - Order details
- `POST /api/orders/create/` - Create order from cart

### Payments
- `POST /api/payments/initiate/` - Initiate mobile payment
- `GET /api/payments/status/{transaction_id}/` - Check status

### Wishlist
- `GET /api/wishlist/` - Get wishlist
- `POST /api/wishlist/add/` - Add to wishlist
- `DELETE /api/wishlist/{id}/` - Remove from wishlist

## ğŸ§ª Testing

```bash
# Run all tests
python manage.py test

# Run with coverage
coverage run manage.py test
coverage report
```

## ğŸ“¦ Project Structure

```
backend/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ users/          # User management & authentication
â”‚   â”œâ”€â”€ products/       # Product catalog
â”‚   â”œâ”€â”€ orders/         # Orders & cart
â”‚   â”œâ”€â”€ payments/       # Payment processing
â”‚   â””â”€â”€ recommendations/# AI recommendations
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ config/         # Django settings
â”‚   â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py
â”‚   â”‚   â”‚   â”œâ”€â”€ dev.py
â”‚   â”‚   â”‚   â””â”€â”€ prod.py
â”‚   â”‚   â”œâ”€â”€ urls.py
â”‚   â”‚   â””â”€â”€ wsgi.py
â”‚   â”œâ”€â”€ common/         # Shared utilities
â”‚   â””â”€â”€ middleware/     # Custom middleware
â”œâ”€â”€ ml_models/          # ML models for recommendations
â”œâ”€â”€ staticfiles/        # Static files
â”œâ”€â”€ media/              # User uploads (Cloudinary)
â”œâ”€â”€ logs/               # Application logs
â”œâ”€â”€ manage.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ build.sh            # Deployment build script
â”œâ”€â”€ render.yaml         # Render configuration
â””â”€â”€ .env.example        # Environment variables template
```

## ğŸ” Security Features

- JWT token authentication
- Password hashing with Django's PBKDF2
- CORS protection
- CSRF protection
- Rate limiting
- SQL injection protection (Django ORM)
- XSS protection
- HTTPS enforcement (production)

## ğŸ¤ Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## ğŸ“„ License

This project is licensed under the MIT License.

## ğŸ‘¥ Authors

- Your Name - [@yourhandle](https://github.com/yourhandle)

## ğŸ™ Acknowledgments

- Django REST Framework team
- Neon for serverless PostgreSQL
- Render for hosting
- Upstash for serverless Redis

## ğŸ“ Support

For support, email support@nexcart.com or create an issue on GitHub.

---

**Built with â¤ï¸ using Django REST Framework**
